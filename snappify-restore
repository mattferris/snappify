#!/bin/bash
#
# snappify snapshot management suite
# github.com/mattferris/snappify
#
# Copyright (c) 2018 Matt Ferris
# Released under the BSD 2-clause license
# github.com/mattferris/snappify/blob/master/LICENSE.txt

# the location of the snap repo
root=".snappify"

# update the location of the snap repo if it was included in the environment
if [ ! -z "$SNAPPIFY_ROOT" ]; then
    root=$SNAPPIFY_ROOT
fi

# report an error
function err {
    echo "error: $2" >&2
    exit $1
}

# report a notice
function notice {
    echo "notice: $1" >&2
}

# determine relative path length
realbase=$(dirname $(realpath "$root"))
baselen=$(echo -n "$realbase/ " | wc -c)

# collect arguments
hash=$1
path=$2

# make sure we have everything we need
if [ -z "$hash" ]; then
    echo "usage: $(basename $0) <hash> [ <path> ... ]"
    exit 1
fi


